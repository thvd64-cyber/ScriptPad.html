<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ScriptPad</title>
<style>
  body { margin:0; font-family: Arial, sans-serif; background:#f5f5f5; }
  #toolbar { display:flex; flex-wrap: wrap; background:#ddd; padding:5px; gap:5px; }
  #toolbar button { padding:5px 10px; cursor:pointer; }
  #editor { width:100%; height:calc(100vh - 70px); padding:10px; font-family: Consolas, monospace; font-size:14px; outline:none; overflow:auto; white-space:pre-wrap; background:#fff; border-top:1px solid #ccc; }
  #status { background:#ccc; padding:5px 10px; font-size:12px; border-top:1px solid #aaa; }
</style>
</head>
<body>

<div id="toolbar">
  <button onclick="newFile()">Nieuw</button>
  <button onclick="openFile()">Openen</button>
  <button onclick="saveFile()">Opslaan</button>
  <button onclick="document.execCommand('undo')">Undo</button>
  <button onclick="document.execCommand('redo')">Redo</button>
  <button onclick="formatText('bold')">Bold</button>
  <button onclick="formatText('italic')">Italic</button>
  <button onclick="formatText('underline')">Underline</button>
  <button onclick="formatText('strikeThrough')">Strikethrough</button>
</div>

<div id="editor" contenteditable="true"></div>
<div id="status">Bestand: nieuw_document.txt - ScriptPad</div>

<input type="file" id="fileInput" style="display:none">

<script>
// --- Bestandsbeheer ---
let currentFile = localStorage.getItem("lastFileName") || "nieuw_document.txt";

function updateStatus(name) {
  document.getElementById("status").innerText = `Bestand: ${name} - ScriptPad`;
}

// Nieuw bestand
function newFile() {
  if(confirm("Alles wissen?")) {
    document.getElementById("editor").innerHTML = "";
    currentFile = "nieuw_document.txt";
    updateStatus(currentFile);
    localStorage.setItem("lastFileName", currentFile);
  }
}

// Openen bestand
function openFile() {
  const input = document.getElementById("fileInput");
  input.accept = ".txt,.html,.csv,.xml,.py,.js,.json,.md";
  input.onchange = e => {
    const file = e.target.files[0];
    if(!file) return;
    const reader = new FileReader();
    reader.onload = () => {
      document.getElementById("editor").innerText = reader.result;
      currentFile = file.name;
      updateStatus(currentFile);
      localStorage.setItem("lastFileName", currentFile);
    };
    reader.readAsText(file, "UTF-8");
  };
  input.click();
}

// Opslaan bestand
function saveFile() {
  const content = document.getElementById("editor").innerText;
  const blob = new Blob([content], {type:"text/plain;charset=utf-8"});
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = currentFile;
  a.click();
  URL.revokeObjectURL(a.href);
  localStorage.setItem("lastFileName", currentFile);
}

// Tekststijlen
function formatText(command) {
  document.execCommand(command, false, null);
}

// --- Shortcuts ---
document.addEventListener('keydown', function(e){
  if(e.ctrlKey){
    switch(e.key.toLowerCase()){
      case 's': e.preventDefault(); saveFile(); break;
      case 'a': e.preventDefault(); document.execCommand('selectAll'); break;
      case 'c': break;
      case 'v': break;
      case 'x': break;
      case 'z': e.preventDefault(); document.execCommand('undo'); break;
      case 'y': e.preventDefault(); document.execCommand('redo'); break;
      case 'b': e.preventDefault(); formatText('bold'); break;
      case 'i': e.preventDefault(); formatText('italic'); break;
      case 'u': e.preventDefault(); formatText('underline'); break;
      case 't': e.preventDefault(); formatText('strikeThrough'); break;
    }
  }
});

// --- Laad laatst geopend bestand ---
window.onload = () => {
  updateStatus(currentFile);
};
</script>

</body>
</html>
